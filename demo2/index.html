<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="tracker.js"></script>
</head>
<body>
<canvas id="inputCanvas" width="320" height="240" style="display:none"></canvas>
<video id="inputVideo" autoplay loop></video>
<hr/>
<button id="snap"> snap </button>
<canvas id="detectedImage" width="320" height="240"></canvas>
<script type="text/javascript">
    var videoInput = document.getElementById('inputVideo');
    var canvasInput = document.getElementById('inputCanvas');

    var htracker = new headtrackr.Tracker();
    htracker.init(videoInput, canvasInput);
    htracker.start();
    var canvas = document.getElementById('detectedImage');
    var context = canvas.getContext('2d');
    document.getElementById("snap").addEventListener("click", function() {
        context.drawImage(videoInput, 0, 0, 320, 240);
    });


    document.addEventListener('facetrackingEvent', function(evt) {
        ///this will execute only once
        console.log(evt)
        context.drawImage(videoInput, evt.y, evt.x, evt.height, evt.width);
        this.removeEventListener('facetrackingEvent', arguments.callee);
    });
    //
//    var handler = function(evt){
//        console.log(evt);
//    };
//    document.addEventListener('facetrackingEvent', handler)
//    document.removeEventListener('facetrackingEvent', handler)
</script>


</body>
</html>